<app-navbar (curentTheme)="receive($event)"></app-navbar>
<div class="user-details" [ngClass]="{ 'elevated-dark': darkTheme }">
  <div class="user-name">
    <div class="user-img">
      <p class="user-logo">{{ userLogo }}</p>
    </div>
    <h2>{{ user.firstName }} {{ user.lastName }}</h2>
    <ul class='menu'>
      <li
        [ngClass]="{ active: detailsOption == 1 }"
        (click)="detailsOption = 1"
      >
        {{ "AccountInfo.Account Info" | translate }}
      </li>
      <li
        [ngClass]="{ active: detailsOption == 2 }"
        (click)="detailsOption = 2"
      >
        {{ "AccountInfo.Address" | translate }}
      </li>
      <li
        [ngClass]="{ active: detailsOption == 5 }"
        (click)="detailsOption = 5"
      >
        {{ "Additional details" | translate }}
      </li>
      <li
        [ngClass]="{ active: detailsOption == 3 || detailsOption == 4 }"
        (click)="detailsOption = 3"
      >
        {{ "AccountInfo.My Orders" | translate }}
      </li>
     
    </ul>
  </div>
  <div class="user-information" *ngIf="detailsOption == 1">
    <div class="user-account-info">
      <h2>
        {{ "AccountInfo.Account Info" | translate }}
      </h2>
      <form [formGroup]="accountForm">
        <div class="input-label-group">
          <label> *{{ "AccountInfo.First Name" | translate }}: </label>
          <input
            type="text"
            formControlName='firstName'
          />
        </div>
        <div class="input-label-group">
          <label> *{{ "AccountInfo.Last Name" | translate }}:</label>
          <input
            type="text"
            formControlName="lastName"
            form
          />
        </div>
        <div class="input-label-group">
          <label>*Email:</label>
          <input
            type="text"
            formControlName="email"
          />
        </div>
        <div class="input-label-group">
          <label>*{{ "AccountInfo.Username" | translate }}:</label>
          <input
            type="text"
            formControlName="username"
            (keyup)='checkUsername()'
          />
          <p *ngIf="usernameExists" > Username taken </p>
        </div>
        <div class="input-label-group">
          <label for="phone"> *{{ "AccountInfo.Phone Number" | translate }}: </label>
          <input
            type="tel"
            formControlName="telephone"
          />
        </div>
        <div class="btn-container">
          <button
            class="submit-btn"
            [disabled]="!accountForm.valid || usernameExists"
            (click)="submit(accountForm)"
          >
            {{ "AccountInfo.Submit" | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
  <div class="user-information" *ngIf="detailsOption == 2">
    <div class="user-account-info">
      <h2>
        Address
      </h2>
      <form [formGroup]='addressForm'>
        <div class="input-label-group">
          <label for="address"> *{{ "AccountInfo.Address" | translate }}: </label>
          <input
            type="text"
            formControlName="address"
          />
        </div>
        <div class="input-label-group">
          <label for="city"> *{{ "AccountInfo.City" | translate }}: </label>
          <input
            type="text"
            formControlName="city"
          />
        </div>
        <div class="input-label-group">
          <label for="county"> *{{ "AccountInfo.County" | translate }}: </label>
          <input
            type="text"
            formControlName="county"
          /><br />
        </div>
        <div class="input-label-group">
          <label for="postalCode"> *{{ "AccountInfo.Postal Code" | translate }}: </label>
          <input
            type="text"
            formControlName="postalCode"
          />
        </div>
        <div class="btn-container">
          <button
            class='submit-btn'
            (click)="submit(addressForm)"
            [disabled]="!addressForm.valid"
          >
            {{ "AccountInfo.Submit" | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
  <div *ngIf="detailsOption === 3" class="details-address">
    <app-my-orders
      (sectionEvent)="receiveSectionChangeFromMyOrder($event)"
    ></app-my-orders>
  </div>
  <div *ngIf="detailsOption == 4">
    <app-order-item
      [order]="order"
      (sectionEvent)="receiveSectionChangeFromOrderItem($event)"
    ></app-order-item>
  </div>
  <div class="user-information" *ngIf="detailsOption == 5">
    <div class="user-account-info">
      <h2>
        Additional details
      </h2>
      <form [formGroup]='additionalDetailsForm'>
        <div class="input-label-group" *ngIf='metric'>
          <label for="weight"> *Weight (kg): </label>
          <input
            type="number"
            formControlName="weight"
          />
        </div>
        <div class="input-label-group" *ngIf='metric'>
          <label for="height"> *Height (cm): </label>
          <input
            type="number"
            formControlName="height"
          />
        </div>
        <div class="input-label-group" >
          <label for="yearOfBirth"> *Year of birth: </label>
          <input
            type="number"
            formControlName="yearOfBirth"
          />
        </div>
        <div class="btn-container">
          <button
            class="submit-btn"
            (click)="submitAdditionalDetails()"
            [disabled]="!additionalDetailsForm.valid"
          >
            {{ "AccountInfo.Submit" | translate }}
          </button>
        </div>
      </form>
    </div>
  </div>
  <div
    class="confirm"
    *ngIf="confirm"
    [ngClass]="{
      dark: darkTheme,
      'confirm-light': !darkTheme
    }"
  >
    <mat-icon>check_circle_outline</mat-icon>
    <h2>{{ "AccountInfo.Succes" | translate }}</h2>
  </div>
</div>
